{% extends "base.html" %}

{% block title %}Exercise{% endblock %}

{% block content %}
  <h1>Exercise: {{ exercise_type.replace('_', ' ').title() }}</h1>
  <p>Translate the Norwegian verb: <strong>{{ verb.norwegian }}</strong></p>
  
  <!-- Form to submit the answer -->
  <form action="{{ url_for('main.submit_answer') }}" method="post">
    <input type="hidden" name="verb_id" value="{{ verb.id }}">
    <label for="user_answer">Your Answer:</label>
    <input type="text" name="user_answer" id="user_answer" required>
    <button type="submit">Submit Answer</button>
  </form>
  
  <!-- Button to get additional context/hint -->
  <button id="get-context-btn" type="button">Get Context</button>
  <div id="context-display" style="margin-top: 15px; padding: 10px; border: 1px solid #ccc;"></div>
  
  <script>
    document.getElementById("get-context-btn").addEventListener("click", function() {
      const verbId = document.querySelector('input[name="verb_id"]').value;
      fetch("/get_context/" + verbId)
        .then(response => response.json())
        .then(data => {
          document.getElementById("context-display").innerText = data.context;
        })
        .catch(error => {
          console.error("Error fetching context:", error);
          document.getElementById("context-display").innerText = "Error retrieving context.";
        });
    });
  </script>
{% endblock %}
